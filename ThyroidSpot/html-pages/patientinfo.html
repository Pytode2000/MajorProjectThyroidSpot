<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../assets/images/thyroidspot-logo.png" />

    <!-- Imports --> 
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
        crossorigin="anonymous"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/patientinfo.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&display=swap" />

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" integrity="sha384-VCmXjywReHh4PwowAiWNagnWcLhlEJLA5buUprzK8rxFgeH0kww/aWY76TfkUoSX"
        crossorigin="anonymous">


    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <!--Chart methods-->
    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://printjs-4de6.kxcdn.com/print.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js" integrity="sha512-G8JE1Xbr0egZE5gNGyUm1fF764iHVfRXshIoUWCTPAbKkkItp/6qal5YAHXrxEu4HNfPTQs6HOu3D5vCGS1j3w=="
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js" integrity="sha512-vBmx0N/uQOXznm/Nbkp7h0P1RfLSj0HQrFSzV8m7rOGyj30fYAOKHYvCNez+yM8IrfnW0TCodDEjRqf6fodf/Q=="
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css" integrity="sha512-SUJFImtiT87gVCOXl3aGC00zfDl6ggYAw5+oheJvRJ8KBXZrr/TMISSdVJ5bBarbQDRC2pR5Kto3xTR0kpZInA=="
        crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js" integrity="sha512-QEiC894KVkN9Tsoi6+mKf8HaCLJvyA6QIRzY5KrfINXYuP9NxdIkRQhGq3BZi0J4I7V5SidGM3XUQ5wFiMDuWg=="
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w=="
        crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>


    <script type="text/javascript" src="../js/patient-functions.js"></script>

    <title>Thyroid-SPOT</title>
</head>

<body>
    <div id="navbar-html"></div>
    <main >
        <!--Patient Cards-->
        <div class="content">
            <div id="patientCardContent" class="container">
                <!-- <div onclick="document.getElementById('diseaseModal').style.display='block'" class="centerText">
                <img src="https://www.mei.edu/sites/default/files/2019-01/Virus.jpg">
                <div class='centerTitle'><b>Disease A</b></div>
            </div> -->
            </div>
            <div id="searchRPTcontain">
                <div id="searchInput">
                    <input id="searchInputBox" placeholder="Search Date...">
                </div>
            </div>
            <div id="reportcontainer">

                <div id="historycontainer">
                    <div id="prescriptionButton"></div>
                    <br class="desktopOnly">
                    <br class="desktopOnly">
                    <div id="reportdetails">
                        <table id="class-report" class="table table-md" style="margin-top: 1em;">
                            <thead>
                                <tr>
                                    <th class="th-sm">Date</th>
                                    <th class="th-sm">FT4</th>
                                    <th class="th-sm">TSH</th>
                                </tr>
                            </thead>
                            <tbody id="dosagehist"></tbody>
                        </table>
                    </div>
                    <hr>
                    <!-- <div id="dosagehist">
                </div> -->
                </div>
                <div id="openGraphModalBtn">
                    <canvas id="graphcontainer2">
                        <!--<h2 style="text-align: center;">Graph over here</h2>-->
                    </canvas>

                </div>
            </div>

        </div>
        <div id="footer-html"></div>
    </main>
    <!-- End of page -->




    <!-- ALL MODALS -->

    <!-- Modal For Create Patient Report -->
    <div class="modal fade" id="createHealthReportModal" tabindex="-1" role="dialog" aria-labelledby="createHealthReportModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="createHealthReportModalLabel">Create Health Report</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form id="createnfotable" onsubmit="postPatientReport(); return false;">
                    <div class="modal-body">
                        <div class="form-row col-xs-4  col-md-12">
                            <div class="col" style="text-align: left;">
                                <div style="display: block;">
                                    <label>FT4:</label>
                                </div>
                                <input type="text" style="width: 70%; display: inline;" class="form-control" id="newFT4" placeholder="Enter FT4..." required>
                                <select name="unitselection" id="newUnitDDL" style="float: inherit;">
                                    <option value="pmol/L" selected>pmol/L</option>
                                    <option value="mU/L">mU/L</option>
                                </select>
                            </div>
                        </div>

                        <br>
                        <div class="form-row col-xs-4  col-md-12">
                            <div class="col" style="text-align: left;">
                                <div style="display: block;">
                                    <label>TSH:</label>
                                </div>
                                <div>
                                    <input type="text" style="width: 70%; display: inline;" class="form-control" id="newTSH" placeholder="Enter TSH..." required>
                                    <select name="unitselection" id="newUnit1DDL" style="float: inherit;">
                                        <option value="mU/L" selected>mU/L</option>
                                        <option value="pmol/L">pmol/L</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <br>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary btn-SaveReport">Save Report</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>


    <!--Modal For Edit Patient Readings-->
    <div class="modal fade" id="editReportModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <!-- <form id="createnfotable" onsubmit="putPatientReport(); return false;"> -->
                    <h4 class="modal-title" id="myModalLabel">Update Test Results</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <form id="updating" onsubmit="putPatientReport(); return false;">
                        <div class="form-group">
                            <div style="display: block;">
                                <label>FT4:</label>
                            </div>
                            <input type="text" style="width: 70%; display: inline;" class="form-control" id="updateFT4" placeholder="Updated FT4..." required>
                            <select name="unitselection" id="FT4unitDDL" style="float: inherit;">
                                <option value="pmol/L" selected>pmol/L</option>
                                <option value="mU/L">mU/L</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <div style="display: block;">
                                <label>TSH:</label>
                            </div>
                            <input type="text" style="width: 70%; display: inline;" class="form-control" id="updateTSH" placeholder="Updated TSH..." required>
                            <select name="unitselection" id="TSHunitDDL" style="float: inherit;">
                                <option value="mU/L" selected>mU/L</option>
                                <option value="pmol/L">pmol/L</option>
                            </select>
                        </div>
                        <div style="text-align: center">
                            <button type="submit" class="btn btn-info custom-class">Save Report</button>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>




    <!-- Diagnosis Modal -->
    <div class="modal fade" id="diagnosisCardModal" tabindex="-1" role="dialog" aria-labelledby="diagnosisCardModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="diagnosisCardModalLabel">Diagnosis</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <table class="table table-sm" style="width: 95%; margin-left: auto; margin-right: auto;">
                        <tr>
                            <td style=" text-align:left; width: 60%;">Diagnosis:</td>
                            <td id="diagnosisDispl">test</td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Date of Birth:</td>
                            <td id="tdDOB"></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Gender:</td>
                            <td id="tdGender"></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Blood Type:</td>
                            <td id="tdBloodType"></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Most Recent Appointment Date:</td>
                            <td id="tdAptDate"></td>
                        </tr>
                    </table>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                </div>

            </div>
        </div>
    </div>

    

    <div class="modal fade" id="graphModal" tabindex="-1" role="dialog" aria-labelledby="graphModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title" id="graphModalLabel">Chart</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body text-center">
                    <div id="chartgraph">
                        <canvas id="graphcontainer1">
                        </canvas>
                    </div>
                    <br>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline-success" id="exportcalc"><i class="fa fa-download"></i> Export chart calculations</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>




    <!--Drug Image modal-->
    <div id="modalImg" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Medicine Image</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="newImageModal">
                    <p>.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-info " id="editImageBtn">Edit Image</button>
                    <button type="button" class="btn btn-secondary " id="closeImageBtn" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--Edit Image modal-->
    <div id="updatemodalImg" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Medicine Image</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="submitImage" onsubmit="updateMedicineImg(); return false;">
                        <div class="form-row col-xs-4  col-md-12">
                            <div class="col" style="text-align: left;">
                                <div>
                                    <input type="file" name="resume" class="form-control newDrugImage" required>
                                </div>
                            </div>
                        </div>
                        <br/>
                    
                </div>
                <div class="modal-footer">
                    <button class="btn btn-info">Upload Image</button>
                </form>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="prescriptionModal" tabindex="-1" role="dialog" aria-labelledby="prescriptionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Prescription</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                   
                    <div id="export">
                        <table class="table table-sm" style="width: 95%; margin-left: auto; margin-right: auto;">
                            <tr>
                                <td style=" text-align:left; width: 60%;">Diagnosis:</td>
                                <td id="tdDiagnosis"></td>
                            </tr>
                            <tr>
                                <td style="text-align:left;">Checkup date:</td>
                                <td id="tdCheckup"></td>
                            </tr>
                            <tr>
                                <td style="text-align:left;">FT4:</td>
                                <td id="tdFt4"></td>
                            </tr>
                            <tr>
                                <td style="text-align:left;">TSH:</td>
                                <td id="tdTsh"></td>
                            </tr>
                        </table>

                        <div id="drugTableDesktop" class="table-responsive-sm">
                            <table class="table" style="background-color: none">

                                <!--Table head-->
                                <thead>
                                    <tr>
                                        <th style="width: 20%;">Drug Name</th>

                                        <th class="th-md">Pills</th>

                                        <th class="th-md">Prescription</th>

                                        <th style="width: 20%;">Image</th>

                                        <th class="th-md">Remarks</th>

                                    </tr>
                                </thead>
                                <!--Table head-->

                                <!--Table body-->
                                <tbody id="prescriptionTable" class="table-light">

                                </tbody>
                                <!--Table body-->


                            </table>
                            <!--Table-->
                        </div>

                        <!-- drug table to be shown in mobile mode, default table will hide -->
                        <div id="drugTableMobile">
                            <div class="card" style="width: auto;">
                                <!-- <img class="card-img-top" src="..." alt="Card image cap"> -->
                                <div class="card-body">
                                  <h4 class="card-title">Card title</h4>
                                  <p class="card-text">Total dosage: 110</p>
                                  <p class="card-text">Dose per day: 2 pills a day, preferably after dinner</p>
                                </div>
                                <ul class="list-group list-group-flush">
                                  <li class="list-group-item">Remarks: -</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline-success" onclick="exportData()"><i class="fa fa-download"></i> Export to PDF</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
                <br>
                <div style="display: none;">
                    <div id="export1">
                        <h2 style="text-align: center;">Test Results</h2>
                        <table class="table table-sm" style="width: 50%; margin-left: auto; margin-right: auto; margin-bottom: 50px;">
                            <tr>
                                <td style=" text-align:left; vertical-align: top; width: 60%;">Diagnosis:</td>
                                <td id="exDiagnosis"></td>
                            </tr>
                            <tr>
                                <td style="text-align:left;">Checkup date:</td>
                                <td id="exCheckup"></td>
                            </tr>
                            <tr>
                                <td style="text-align:left;">FT4:</td>
                                <td id="exFt4"></td>
                            </tr>
                            <tr>
                                <td style="text-align:left;">TSH:</td>
                                <td id="exTsh"></td>
                            </tr>
                        </table>

                        <div class="table-responsive-sm">
                            <h2 style="text-align: center;">Prescription</h2>
                            <table id="exportDoseTable" class="table" style="width: 70%; margin-left: auto; margin-right: auto;">
                            </table>
                            <!--Table-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



   


   

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>
    <script src="../js/graph_algorithm.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#navbar-html").load("../html-components/navbar.html");

            $("#footer-html").load("../html-components/footer.html");
        });
    </script>
</body>

</html>