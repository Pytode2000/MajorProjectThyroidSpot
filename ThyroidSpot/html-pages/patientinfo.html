<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../assets/images/thyroidspot-logo.png" />

    <!-- Imports -->

    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/patientinfo.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&display=swap" />
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://printjs-4de6.kxcdn.com/print.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js"></script>

    <script src="../js/patient-functions.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js" integrity="sha512-G8JE1Xbr0egZE5gNGyUm1fF764iHVfRXshIoUWCTPAbKkkItp/6qal5YAHXrxEu4HNfPTQs6HOu3D5vCGS1j3w==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js" integrity="sha512-vBmx0N/uQOXznm/Nbkp7h0P1RfLSj0HQrFSzV8m7rOGyj30fYAOKHYvCNez+yM8IrfnW0TCodDEjRqf6fodf/Q==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css" integrity="sha512-SUJFImtiT87gVCOXl3aGC00zfDl6ggYAw5+oheJvRJ8KBXZrr/TMISSdVJ5bBarbQDRC2pR5Kto3xTR0kpZInA==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js" integrity="sha512-QEiC894KVkN9Tsoi6+mKf8HaCLJvyA6QIRzY5KrfINXYuP9NxdIkRQhGq3BZi0J4I7V5SidGM3XUQ5wFiMDuWg==" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.css" integrity="sha512-/zs32ZEJh+/EO2N1b0PEdoA10JkdC3zJ8L5FTiQu82LR9S/rOQNfQN7U59U9BC12swNeRAz3HSzIL2vpp4fv3w==" crossorigin="anonymous" />


    <title>Thyroid Spot</title>
</head>

<body>
    <div id="navbar-html"></div>
    <main>
        <!--Patient Cards-->
        <div id="patientCardContent" class="container">
            <!-- <div onclick="document.getElementById('diseaseModal').style.display='block'" class="centerText">
                <img src="https://www.mei.edu/sites/default/files/2019-01/Virus.jpg">
                <div class='centerTitle'><b>Disease A</b></div>
            </div> -->
        </div>
        <div id="searchRPTcontain">
            <div id="searchInput">
            <input id="searchInputBox" onkeyup="searchPatientReport();" placeholder="Search Date...">
            </div>
            <div id="createrpt">
            <button id='createrptbtn' class=' btn btn-info btn-sm'>Create Report</button>
            </div>
        </div>
        <div id="reportcontainer">
            
            <div id="historycontainer">
                <!-- <table class='centerTable' style="margin-top: 1em;">
                    <tr><th id="labelDate" >Date</th>
                        <th id="labelFT4" >FT4</th>
                        <th id="labelTSH">TSH</th>
                        <th id="labelDrug">Drug Dose</th>
                </table> -->
                <table id="class-report" class="table table-md" style="margin-top: 1em;">
                    <thead>
                    <tr>
                        <th class="th-sm">Date</th>
                        <th class="th-sm">FT4</th>
                        <th class="th-sm">TSH</th>
                        <th scope="col">Drug Dose</th>
                    </tr>
                    </thead>
                    <tbody id="dosagehist"></tbody>
                </table>
                <hr>
                <!-- <div id="dosagehist">
                </div> -->
            </div>
            <div id="chart-container">
                <canvas id="graphcontainer" >
                    <!--<h2 style="text-align: center;">Graph over here</h2>-->
                </canvas>
            </div>
        </div>
        <!--Modal For Patient Info-->
        <div id="newPatientModal" class="w3-modal">
            <div class="w3-modal-content">
                <div class="w3-container">
                    <span onclick="document.getElementById('newPatientModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                    <h1 id="diseaseName">Create Patient Info</h1>
                    <hr>
                    <table id="createnfotable">
                    <tr>
                    <td class="firsttd">
                    <label>NRIC:</label>
                    </td>
                    <td class="labeltd">
                    <input id="newIC">
                    </td>
                    </tr>
                    
                    <tr>
                    <td class="firsttd">
                    <label>Date of birth:</label>
                    </td>
                    <td class="labeltd">
                    <input id="newDOB">
                    </td>
                    </tr>

                    <tr>
                    <td class="firsttd">
                    <label>Gender:</label>
                    </td>
                    <td class="labeltd">
                    <select name="gender" id="newGenderDDL">
                        <option value="" selected disabled hidden>--Choose here--</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                    </td>
                    </tr>
                    
                    <tr>
                    <td class="firsttd">
                    <label>Diagnosis:</label>
                    </td>
                    <td class="labeltd">
                    <select name="diagnosis" id="newDiagnosisDDL">
                        <option value="" selected disabled hidden>--Choose here--</option>
                        <option value="De Quervain's Thyroiditis">De Quervain's Thyroiditis</option>
                        <option value="Differentiated thyroid carcinoma">Differentiated thyroid carcinoma</option>
                        <option value="Graves' disease">Graves' disease</option>
                        <option value="Hashimoto's thyroiditis">Hashimoto's thyroiditis</option>
                        <option value="Hypothyroidism">Hypothyroidism</option>
                        <option value="Post-thyroidectomy">Post-thyroidectomy</option>
                        <option value="Riedel's thyroiditis">Riedel's thyroiditis</option>
                    </select>
                    </td>
                    </tr>
                    
                    <tr>
                    <td class="firsttd">
                    <label>Blood Type:</label>
                    </td>
                    <td class="labeltd">
                    <select name="bloodtype" id="newBloodTypeDDL">
                        <option value="" selected disabled hidden>--Choose here--</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                    </td>
                    </tr>
                    </table>
                    <div style="text-align: center; margin-bottom: 2em;">
                        <button id="btnRegister" class="btn btn-dark custom-class bold" onclick="postPatientInfo()">Create Patient Info</button>
                    </div>
                </div>
            </div>
        </div>


        <!--Modal For Create Patient Report-->
        <div id="newReportModal" class="w3-modal">
            <div class="w3-modal-content">
                <div class="w3-container">
                    <span id="closereportmodal" onclick="document.getElementById('newReportModal').style.display='none' " class="w3-button w3-display-topright">&times;</span>
                    <h2 id="diseaseName" style="text-align: center;">Create Health Report</h2>
                    <hr>
                    
                    <div class="modal-body">
                    <form id="createnfotable" onsubmit="postPatientReport(); return false;">
                        <div class="form-row col-xs-4  col-md-12">
                            <div class="col" style="text-align: left;">
                                <label>FT4:</label>
                                <div>
                                <input type="text" class="form-control" id="newFT4" placeholder="Enter FT4..." required>
                                </div>
                            </div>
                        </div>

                        <br>
                        <div class="form-row col-xs-4  col-md-12">
                            <div class="col" style="text-align: left;">
                                <label>TSH:</label>
                                <div>
                                <input type="text" class="form-control" id="newTSH" placeholder="Enter TSH..." required>
                                </div>
                            </div>
                        </div>
                        <br>
                    
                           <!-- TODO: to be moved to clinician side -->
                            <div class="form-row col-xs-4  col-md-12">
                                <div class="col-md-6">
                                    <label>Drug:</label>
                                    <div>
                                    <select name="bloodtype" class="newDrugName">
                                        <option value="" selected disabled hidden>--Choose here--</option>
                                        <option value="carbimazole">carbimazole</option>
                                        <option value="methimazole">methimazole</option>
                                        <option value="thiamazole">thiamazole</option>
                                        <option value="propylthiouracil">propylthiouracil</option>
                                        <option value="levothyroxine">levothyroxine</option>
                                        <option value="liothyronine">liothyronine"</option>
                                        <option value="propranolol">propranolol</option>
                                        <option value="others">others</option>
                                    </select>
                                    </div>
                                </div>

                                <br class="divider">
    
                                <div class="col-md-6">
                                    <label>Tablets:</label>
                                    <div>
                                    <input type="text" class="newDrugDose" placeholder="Enter No..." required>
                                    </div>
                                </div> 
                            </div>
                            <div class="form-row col-xs-4  col-md-12">
                                <div class="col" style="text-align: left;">
                                    <label>Tablets per day:</label>
                                    <div>
                                    <input type="text" class="form-control" id="newTSH" placeholder="Enter prescription..." required>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="form-row col-xs-4  col-md-12">
                                <div class="col" style="text-align: left;">
                                    <label>Remarks:</label>
                                    <div>
                                    <input type="text" class="form-control" id="newTSH" placeholder="Enter remarks...">
                                    </div>
                                </div>
                            </div>
                            <br>
                        

                        <div id="addon">
                        </div>

                        </div>
                            <div style="text-align: center; margin-bottom: 1em;">
                                <button id="addMoreRows" class="btn btn-secondary custom-class">Add another drug dose</button>
                            </div>
                            <div style="text-align: center; padding-bottom: 1em;">
                                <button type="submit" class="btn btn-dark btn-SaveReport custom-class bold">Save Report</button>
                            </div>
                    </form>
                </div>
            </div>
        </div>


         <!--Modal For Prescriptions-->
         <div id="prescriptionModal" class="w3-modal">
            <div class="w3-modal-content">
                <div class="w3-container">
                    <span onclick="document.getElementById('prescriptionModal').style.display='none'" class="w3-button w3-display-topright">&times;</span>
                    <h2 style="text-align: center;">Prescription</h2>
                    
                    <table class="table table-sm" style="width: 95%; margin-left: auto; margin-right: auto;">
                        <tr>
                            <td style=" text-align:left; width: 60%;">Diagnosis:</td>
                            <td id="tdDiagnosis"></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">Checkup date:</td>
                            <td id="tdCheckup"></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">FT4:</td>
                            <td id="tdFt4"></td>
                        </tr>
                        <tr>
                            <td style="text-align:left;">TSH:</td>
                            <td id="tdTsh" ></td>
                        </tr>
                    </table>
                    
                  <div class="table-responsive-sm">
                    <table class="table" style="background-color: none">

                        <!--Table head-->
                        <thead>
                          <tr>
                            <th style="width: 59%;">Drug Name</th>
                            
                            <th class="th-md">Dosage</th>
                            
                          </tr>
                        </thead>
                        <!--Table head-->
                      
                        <!--Table body-->
                        <tbody id="prescriptionTable" class="table-light">
                          
                        </tbody>
                        <!--Table body-->
                      
                      
                      </table>
                      <!--Table-->
                      </div>
                </div>
            </div>
        </div>
                    
    </main>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-firestore.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#navbar-html").load("../html-components/navbar.html");

            $("#footer-html").load("../html-components/footer.html");
        });


    </script>

<script type="text/javascript">
    var ctx = document.getElementById('graphcontainer').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'line',
        
        data: {
            labels: ['Ft4', 'TSH', 'ABC'],
            datasets: [{
                label: 'value xx',
                data: [12, 19, 3],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                        
                    }
                }]
            }
        }
    });
</script>
</body>

</html>